package model.exportation;

import com.google.gson.*;
import manager.PackageDiagramManager;
import model.diagram.exportation.DiagramExporter;
import model.diagram.javafx.classdiagram.SinkVertexDeserializer;
import model.diagram.exportation.JavaFXPackageDiagramExporter;
import model.graph.Arc;
import model.graph.SinkVertex;
import model.graph.Vertex;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;

import java.io.File;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.util.*;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertTrue;

public class JavaFXPackageDiagramExporterTest {

    Path currentDirectory = Path.of(".");

    @Test
    void exportDiagramTest() {
        try {
            PackageDiagramManager packageDiagramManager = new PackageDiagramManager();
            packageDiagramManager.createSourceProject(Paths.get(currentDirectory.toRealPath() + "\\src\\test\\resources\\LatexEditor\\src"));
            packageDiagramManager.convertTreeToDiagram(List.of(
                "src.view",
                "src.model",
                "src.model.strategies",
                "src.controller.commands",
                "src.controller"
            ));
            Map<Vertex, Set<Arc<Vertex>>> createdDiagram = packageDiagramManager.getDiagram();
            String relativePath = Paths.get(currentDirectory.toRealPath() + "\\src\\test\\resources\\LatexEditor\\src").toString().replaceAll("\\\\", "\\\\\\\\").replaceAll("\\\\", "\\\\\\\\");
            DiagramExporter javaFXExporter = new JavaFXPackageDiagramExporter(createdDiagram);
            File actualFile = javaFXExporter.exportDiagram(Path.of(System.getProperty("user.home") + "\\testingExportedFile.txt"));

            String expectedJsonString = "[{\"name\":\"src.view\",\"path\":\""
                    + relativePath + "\\\\view\",\"vertexType\":\"PACKAGE\",\"sinkVertices\":[\"{\\\"name\\\":\\\"LatexEditorView\\\",\\\"path\\\":\\\""
                    + relativePath + "\\\\\\\\view\\\\\\\\LatexEditorView.java\\\",\\\"vertexType\\\":\\\"CLASS\\\",\\\"methods\\\":[{\\\"name\\\":\\\"getStrategy\\\",\\\"returnType\\\":\\\"String\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"getController\\\",\\\"returnType\\\":\\\"LatexEditorController\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"getFilename\\\",\\\"returnType\\\":\\\"String\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"setStrategy\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"strategy\\\\\\\":\\\\\\\"String\\\\\\\"}\\\"},{\\\"name\\\":\\\"getVersionsManager\\\",\\\"returnType\\\":\\\"VersionsManager\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"setController\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"controller\\\\\\\":\\\\\\\"LatexEditorController\\\\\\\"}\\\"},{\\\"name\\\":\\\"getType\\\",\\\"returnType\\\":\\\"String\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"setType\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"type\\\\\\\":\\\\\\\"String\\\\\\\"}\\\"},{\\\"name\\\":\\\"setCurrentDocument\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"currentDocument\\\\\\\":\\\\\\\"Document\\\\\\\"}\\\"},{\\\"name\\\":\\\"setFilename\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"filename\\\\\\\":\\\\\\\"String\\\\\\\"}\\\"},{\\\"name\\\":\\\"getText\\\",\\\"returnType\\\":\\\"String\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"setVersionsManager\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"versionsManager\\\\\\\":\\\\\\\"VersionsManager\\\\\\\"}\\\"},{\\\"name\\\":\\\"setText\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"text\\\\\\\":\\\\\\\"String\\\\\\\"}\\\"},{\\\"name\\\":\\\"getCurrentDocument\\\",\\\"returnType\\\":\\\"Document\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"saveToFile\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"loadFromFile\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"saveContents\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"}],\\\"fields\\\":[{\\\"name\\\":\\\"controller\\\",\\\"returnType\\\":\\\"LatexEditorController\\\",\\\"modifier\\\":\\\"PRIVATE\\\"},{\\\"name\\\":\\\"currentDocument\\\",\\\"returnType\\\":\\\"Document\\\",\\\"modifier\\\":\\\"PRIVATE\\\"},{\\\"name\\\":\\\"type\\\",\\\"returnType\\\":\\\"String\\\",\\\"modifier\\\":\\\"PRIVATE\\\"},{\\\"name\\\":\\\"text\\\",\\\"returnType\\\":\\\"String\\\",\\\"modifier\\\":\\\"PRIVATE\\\"},{\\\"name\\\":\\\"filename\\\",\\\"returnType\\\":\\\"String\\\",\\\"modifier\\\":\\\"PRIVATE\\\"},{\\\"name\\\":\\\"strategy\\\",\\\"returnType\\\":\\\"String\\\",\\\"modifier\\\":\\\"PRIVATE\\\"},{\\\"name\\\":\\\"versionsManager\\\",\\\"returnType\\\":\\\"VersionsManager\\\",\\\"modifier\\\":\\\"PRIVATE\\\"}],\\\"arcs\\\":[{\\\"source\\\":\\\"LatexEditorView\\\",\\\"target\\\":\\\"LatexEditorController\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"LatexEditorView\\\",\\\"target\\\":\\\"LatexEditorController\\\",\\\"arcType\\\":\\\"ASSOCIATION\\\"},{\\\"source\\\":\\\"LatexEditorView\\\",\\\"target\\\":\\\"VersionsManager\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"LatexEditorView\\\",\\\"target\\\":\\\"VersionsManager\\\",\\\"arcType\\\":\\\"ASSOCIATION\\\"},{\\\"source\\\":\\\"LatexEditorView\\\",\\\"target\\\":\\\"Document\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"LatexEditorView\\\",\\\"target\\\":\\\"Document\\\",\\\"arcType\\\":\\\"ASSOCIATION\\\"}]}\",\"{\\\"name\\\":\\\"MainWindow\\\",\\\"path\\\":\\\""
                    + relativePath +  "\\\\\\\\view\\\\\\\\MainWindow.java\\\",\\\"vertexType\\\":\\\"CLASS\\\",\\\"methods\\\":[{\\\"name\\\":\\\"actionPerformed\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"e\\\\\\\":\\\\\\\"ActionEvent\\\\\\\"}\\\"},{\\\"name\\\":\\\"actionPerformed\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"e\\\\\\\":\\\\\\\"ActionEvent\\\\\\\"}\\\"},{\\\"name\\\":\\\"actionPerformed\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"e\\\\\\\":\\\\\\\"ActionEvent\\\\\\\"}\\\"},{\\\"name\\\":\\\"actionPerformed\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"e\\\\\\\":\\\\\\\"ActionEvent\\\\\\\"}\\\"},{\\\"name\\\":\\\"actionPerformed\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"arg0\\\\\\\":\\\\\\\"ActionEvent\\\\\\\"}\\\"},{\\\"name\\\":\\\"actionPerformed\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"e\\\\\\\":\\\\\\\"ActionEvent\\\\\\\"}\\\"},{\\\"name\\\":\\\"actionPerformed\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"arg0\\\\\\\":\\\\\\\"ActionEvent\\\\\\\"}\\\"},{\\\"name\\\":\\\"actionPerformed\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"e\\\\\\\":\\\\\\\"ActionEvent\\\\\\\"}\\\"},{\\\"name\\\":\\\"actionPerformed\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"arg0\\\\\\\":\\\\\\\"ActionEvent\\\\\\\"}\\\"},{\\\"name\\\":\\\"actionPerformed\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"e\\\\\\\":\\\\\\\"ActionEvent\\\\\\\"}\\\"},{\\\"name\\\":\\\"actionPerformed\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"e\\\\\\\":\\\\\\\"ActionEvent\\\\\\\"}\\\"},{\\\"name\\\":\\\"editContents\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"type\\\\\\\":\\\\\\\"String\\\\\\\"}\\\"},{\\\"name\\\":\\\"actionPerformed\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"e\\\\\\\":\\\\\\\"ActionEvent\\\\\\\"}\\\"},{\\\"name\\\":\\\"actionPerformed\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"e\\\\\\\":\\\\\\\"ActionEvent\\\\\\\"}\\\"},{\\\"name\\\":\\\"actionPerformed\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"e\\\\\\\":\\\\\\\"ActionEvent\\\\\\\"}\\\"},{\\\"name\\\":\\\"actionPerformed\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"arg0\\\\\\\":\\\\\\\"ActionEvent\\\\\\\"}\\\"},{\\\"name\\\":\\\"actionPerformed\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"e\\\\\\\":\\\\\\\"ActionEvent\\\\\\\"}\\\"},{\\\"name\\\":\\\"MainWindow\\\",\\\"returnType\\\":\\\"Constructor\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"latexEditorView\\\\\\\":\\\\\\\"LatexEditorView\\\\\\\"}\\\"},{\\\"name\\\":\\\"initialize\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PRIVATE\\\",\\\"parameters\\\":\\\"{}\\\"}],\\\"fields\\\":[{\\\"name\\\":\\\"frame\\\",\\\"returnType\\\":\\\"JFrame\\\",\\\"modifier\\\":\\\"PRIVATE\\\"},{\\\"name\\\":\\\"editorPane\\\",\\\"returnType\\\":\\\"JEditorPane\\\",\\\"modifier\\\":\\\"PRIVATE\\\"},{\\\"name\\\":\\\"latexEditorView\\\",\\\"returnType\\\":\\\"LatexEditorView\\\",\\\"modifier\\\":\\\"PRIVATE\\\"}],\\\"arcs\\\":[{\\\"source\\\":\\\"MainWindow\\\",\\\"target\\\":\\\"LatexEditorView\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"MainWindow\\\",\\\"target\\\":\\\"LatexEditorView\\\",\\\"arcType\\\":\\\"ASSOCIATION\\\"},{\\\"source\\\":\\\"MainWindow\\\",\\\"target\\\":\\\"ChooseTemplate\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"}]}\",\"{\\\"name\\\":\\\"ChooseTemplate\\\",\\\"path\\\":\\\""
                    + relativePath + "\\\\\\\\view\\\\\\\\ChooseTemplate.java\\\",\\\"vertexType\\\":\\\"CLASS\\\",\\\"methods\\\":[{\\\"name\\\":\\\"actionPerformed\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"e\\\\\\\":\\\\\\\"ActionEvent\\\\\\\"}\\\"},{\\\"name\\\":\\\"initialize\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PRIVATE\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"actionPerformed\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"e\\\\\\\":\\\\\\\"ActionEvent\\\\\\\"}\\\"},{\\\"name\\\":\\\"actionPerformed\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"arg0\\\\\\\":\\\\\\\"ActionEvent\\\\\\\"}\\\"},{\\\"name\\\":\\\"diselectRadioButtons\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PRIVATE\\\",\\\"parameters\\\":\\\"{\\\\\\\"radioButton3\\\\\\\":\\\\\\\"JRadioButton\\\\\\\",\\\\\\\"radioButton4\\\\\\\":\\\\\\\"JRadioButton\\\\\\\",\\\\\\\"radioButton1\\\\\\\":\\\\\\\"JRadioButton\\\\\\\",\\\\\\\"radioButton2\\\\\\\":\\\\\\\"JRadioButton\\\\\\\"}\\\"},{\\\"name\\\":\\\"actionPerformed\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"e\\\\\\\":\\\\\\\"ActionEvent\\\\\\\"}\\\"},{\\\"name\\\":\\\"actionPerformed\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"e\\\\\\\":\\\\\\\"ActionEvent\\\\\\\"}\\\"},{\\\"name\\\":\\\"ChooseTemplate\\\",\\\"returnType\\\":\\\"Constructor\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"previous\\\\\\\":\\\\\\\"String\\\\\\\",\\\\\\\"latexEditorView\\\\\\\":\\\\\\\"LatexEditorView\\\\\\\"}\\\"},{\\\"name\\\":\\\"actionPerformed\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"e\\\\\\\":\\\\\\\"ActionEvent\\\\\\\"}\\\"}],\\\"fields\\\":[{\\\"name\\\":\\\"frame\\\",\\\"returnType\\\":\\\"JFrame\\\",\\\"modifier\\\":\\\"PRIVATE\\\"},{\\\"name\\\":\\\"latexEditorView\\\",\\\"returnType\\\":\\\"LatexEditorView\\\",\\\"modifier\\\":\\\"PRIVATE\\\"},{\\\"name\\\":\\\"previous\\\",\\\"returnType\\\":\\\"String\\\",\\\"modifier\\\":\\\"PRIVATE\\\"}],\\\"arcs\\\":[{\\\"source\\\":\\\"ChooseTemplate\\\",\\\"target\\\":\\\"LatexEditorView\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"ChooseTemplate\\\",\\\"target\\\":\\\"LatexEditorView\\\",\\\"arcType\\\":\\\"ASSOCIATION\\\"},{\\\"source\\\":\\\"ChooseTemplate\\\",\\\"target\\\":\\\"MainWindow\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"ChooseTemplate\\\",\\\"target\\\":\\\"OpeningWindow\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"}]}\",\"{\\\"name\\\":\\\"OpeningWindow\\\",\\\"path\\\":\\\""
                    + relativePath + "\\\\\\\\view\\\\\\\\OpeningWindow.java\\\",\\\"vertexType\\\":\\\"CLASS\\\",\\\"methods\\\":[{\\\"name\\\":\\\"main\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"args\\\\\\\":\\\\\\\"String[]\\\\\\\"}\\\"},{\\\"name\\\":\\\"actionPerformed\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"e\\\\\\\":\\\\\\\"ActionEvent\\\\\\\"}\\\"},{\\\"name\\\":\\\"initialize\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PRIVATE\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"OpeningWindow\\\",\\\"returnType\\\":\\\"Constructor\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"actionPerformed\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"e\\\\\\\":\\\\\\\"ActionEvent\\\\\\\"}\\\"},{\\\"name\\\":\\\"run\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"actionPerformed\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"e\\\\\\\":\\\\\\\"ActionEvent\\\\\\\"}\\\"}],\\\"fields\\\":[{\\\"name\\\":\\\"frame\\\",\\\"returnType\\\":\\\"JFrame\\\",\\\"modifier\\\":\\\"PRIVATE\\\"},{\\\"name\\\":\\\"latexEditorView\\\",\\\"returnType\\\":\\\"LatexEditorView\\\",\\\"modifier\\\":\\\"PRIVATE\\\"}],\\\"arcs\\\":[{\\\"source\\\":\\\"OpeningWindow\\\",\\\"target\\\":\\\"LatexEditorController\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"OpeningWindow\\\",\\\"target\\\":\\\"VersionsManager\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"OpeningWindow\\\",\\\"target\\\":\\\"LatexEditorView\\\",\\\"arcType\\\":\\\"ASSOCIATION\\\"},{\\\"source\\\":\\\"OpeningWindow\\\",\\\"target\\\":\\\"ChooseTemplate\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"OpeningWindow\\\",\\\"target\\\":\\\"VersionsStrategy\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"OpeningWindow\\\",\\\"target\\\":\\\"VolatileVersionsStrategy\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"}]}\"],\"parent\":{\"name\":\"src\",\"path\":\""
                    + relativePath + "\",\"vertexType\":\"PACKAGE_PRIVATE\"},\"neighbours\":[],\"arcs\":[{\"source\":\"src.view\",\"target\":\"src.controller\",\"arcType\":\"DEPENDENCY\"},{\"source\":\"src.view\",\"target\":\"src.model\",\"arcType\":\"DEPENDENCY\"},{\"source\":\"src.view\",\"target\":\"src.model.strategies\",\"arcType\":\"DEPENDENCY\"}]},{\"name\":\"src.controller\",\"path\":\""
                    + relativePath + "\\\\controller\",\"vertexType\":\"PACKAGE\",\"sinkVertices\":[\"{\\\"name\\\":\\\"LatexEditorController\\\",\\\"path\\\":\\\""
                    + relativePath + "\\\\\\\\controller\\\\\\\\LatexEditorController.java\\\",\\\"vertexType\\\":\\\"CLASS\\\",\\\"methods\\\":[{\\\"name\\\":\\\"LatexEditorController\\\",\\\"returnType\\\":\\\"Constructor\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"versionsManager\\\\\\\":\\\\\\\"VersionsManager\\\\\\\"}\\\"},{\\\"name\\\":\\\"enact\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"command\\\\\\\":\\\\\\\"String\\\\\\\"}\\\"}],\\\"fields\\\":[{\\\"name\\\":\\\"commands\\\",\\\"returnType\\\":\\\"HashMap[String,Command]\\\",\\\"modifier\\\":\\\"PRIVATE\\\"}],\\\"arcs\\\":[{\\\"source\\\":\\\"LatexEditorController\\\",\\\"target\\\":\\\"VersionsManager\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"LatexEditorController\\\",\\\"target\\\":\\\"Command\\\",\\\"arcType\\\":\\\"AGGREGATION\\\"},{\\\"source\\\":\\\"LatexEditorController\\\",\\\"target\\\":\\\"CommandFactory\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"}]}\"],\"parent\":{\"name\":\"src\",\"path\":\""
                    + relativePath + "\",\"vertexType\":\"PACKAGE_PRIVATE\"},\"neighbours\":[{\"name\":\"src.controller.commands\",\"path\":\"\\\""
                    + relativePath + "\\\\\\\\controller\\\\\\\\commands\",\"vertexType\":\"PACKAGE\",\"parentName\":\"src.controller\"}],\"arcs\":[{\"source\":\"src.controller\",\"target\":\"src.model\",\"arcType\":\"DEPENDENCY\"},{\"source\":\"src.controller\",\"target\":\"src.controller.commands\",\"arcType\":\"DEPENDENCY\"}]},{\"name\":\"src.controller.commands\",\"path\":\""
                    + relativePath + "\\\\controller\\\\commands\",\"vertexType\":\"PACKAGE\",\"sinkVertices\":[\"{\\\"name\\\":\\\"CreateCommand\\\",\\\"path\\\":\\\""
                    + relativePath + "\\\\\\\\controller\\\\\\\\commands\\\\\\\\CreateCommand.java\\\",\\\"vertexType\\\":\\\"CLASS\\\",\\\"methods\\\":[{\\\"name\\\":\\\"CreateCommand\\\",\\\"returnType\\\":\\\"Constructor\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"documentManager\\\\\\\":\\\\\\\"DocumentManager\\\\\\\",\\\\\\\"versionsManager\\\\\\\":\\\\\\\"VersionsManager\\\\\\\"}\\\"},{\\\"name\\\":\\\"execute\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"}],\\\"fields\\\":[{\\\"name\\\":\\\"documentManager\\\",\\\"returnType\\\":\\\"DocumentManager\\\",\\\"modifier\\\":\\\"PRIVATE\\\"},{\\\"name\\\":\\\"versionsManager\\\",\\\"returnType\\\":\\\"VersionsManager\\\",\\\"modifier\\\":\\\"PRIVATE\\\"}],\\\"arcs\\\":[{\\\"source\\\":\\\"CreateCommand\\\",\\\"target\\\":\\\"VersionsManager\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"CreateCommand\\\",\\\"target\\\":\\\"VersionsManager\\\",\\\"arcType\\\":\\\"ASSOCIATION\\\"},{\\\"source\\\":\\\"CreateCommand\\\",\\\"target\\\":\\\"DocumentManager\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"CreateCommand\\\",\\\"target\\\":\\\"DocumentManager\\\",\\\"arcType\\\":\\\"ASSOCIATION\\\"},{\\\"source\\\":\\\"CreateCommand\\\",\\\"target\\\":\\\"Command\\\",\\\"arcType\\\":\\\"IMPLEMENTATION\\\"}]}\",\"{\\\"name\\\":\\\"AddLatexCommand\\\",\\\"path\\\":\\\""
                    + relativePath + "\\\\\\\\controller\\\\\\\\commands\\\\\\\\AddLatexCommand.java\\\",\\\"vertexType\\\":\\\"CLASS\\\",\\\"methods\\\":[{\\\"name\\\":\\\"AddLatexCommand\\\",\\\"returnType\\\":\\\"Constructor\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"versionsManager\\\\\\\":\\\\\\\"VersionsManager\\\\\\\"}\\\"},{\\\"name\\\":\\\"execute\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"}],\\\"fields\\\":[{\\\"name\\\":\\\"versionsManager\\\",\\\"returnType\\\":\\\"VersionsManager\\\",\\\"modifier\\\":\\\"PRIVATE\\\"}],\\\"arcs\\\":[{\\\"source\\\":\\\"AddLatexCommand\\\",\\\"target\\\":\\\"VersionsManager\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"AddLatexCommand\\\",\\\"target\\\":\\\"VersionsManager\\\",\\\"arcType\\\":\\\"ASSOCIATION\\\"},{\\\"source\\\":\\\"AddLatexCommand\\\",\\\"target\\\":\\\"Command\\\",\\\"arcType\\\":\\\"IMPLEMENTATION\\\"}]}\",\"{\\\"name\\\":\\\"SaveCommand\\\",\\\"path\\\":\\\""
                    + relativePath + "\\\\\\\\controller\\\\\\\\commands\\\\\\\\SaveCommand.java\\\",\\\"vertexType\\\":\\\"CLASS\\\",\\\"methods\\\":[{\\\"name\\\":\\\"execute\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"SaveCommand\\\",\\\"returnType\\\":\\\"Constructor\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"versionsManager\\\\\\\":\\\\\\\"VersionsManager\\\\\\\"}\\\"}],\\\"fields\\\":[{\\\"name\\\":\\\"versionsManager\\\",\\\"returnType\\\":\\\"VersionsManager\\\",\\\"modifier\\\":\\\"PRIVATE\\\"}],\\\"arcs\\\":[{\\\"source\\\":\\\"SaveCommand\\\",\\\"target\\\":\\\"VersionsManager\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"SaveCommand\\\",\\\"target\\\":\\\"VersionsManager\\\",\\\"arcType\\\":\\\"ASSOCIATION\\\"},{\\\"source\\\":\\\"SaveCommand\\\",\\\"target\\\":\\\"Command\\\",\\\"arcType\\\":\\\"IMPLEMENTATION\\\"}]}\",\"{\\\"name\\\":\\\"ChangeVersionsStrategyCommand\\\",\\\"path\\\":\\\""
                    + relativePath + "\\\\\\\\controller\\\\\\\\commands\\\\\\\\ChangeVersionsStrategyCommand.java\\\",\\\"vertexType\\\":\\\"CLASS\\\",\\\"methods\\\":[{\\\"name\\\":\\\"ChangeVersionsStrategyCommand\\\",\\\"returnType\\\":\\\"Constructor\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"versionsManager\\\\\\\":\\\\\\\"VersionsManager\\\\\\\"}\\\"},{\\\"name\\\":\\\"execute\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"}],\\\"fields\\\":[{\\\"name\\\":\\\"versionsManager\\\",\\\"returnType\\\":\\\"VersionsManager\\\",\\\"modifier\\\":\\\"PRIVATE\\\"}],\\\"arcs\\\":[{\\\"source\\\":\\\"ChangeVersionsStrategyCommand\\\",\\\"target\\\":\\\"VersionsManager\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"ChangeVersionsStrategyCommand\\\",\\\"target\\\":\\\"VersionsManager\\\",\\\"arcType\\\":\\\"ASSOCIATION\\\"},{\\\"source\\\":\\\"ChangeVersionsStrategyCommand\\\",\\\"target\\\":\\\"Command\\\",\\\"arcType\\\":\\\"IMPLEMENTATION\\\"}]}\",\"{\\\"name\\\":\\\"Command\\\",\\\"path\\\":\\\""
                    + relativePath + "\\\\\\\\controller\\\\\\\\commands\\\\\\\\Command.java\\\",\\\"vertexType\\\":\\\"INTERFACE\\\",\\\"methods\\\":[{\\\"name\\\":\\\"execute\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"}],\\\"fields\\\":[],\\\"arcs\\\":[]}\",\"{\\\"name\\\":\\\"DisableVersionsManagementCommand\\\",\\\"path\\\":\\\""
                    + relativePath + "\\\\\\\\controller\\\\\\\\commands\\\\\\\\DisableVersionsManagementCommand.java\\\",\\\"vertexType\\\":\\\"CLASS\\\",\\\"methods\\\":[{\\\"name\\\":\\\"DisableVersionsManagementCommand\\\",\\\"returnType\\\":\\\"Constructor\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"versionsManager\\\\\\\":\\\\\\\"VersionsManager\\\\\\\"}\\\"},{\\\"name\\\":\\\"execute\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"}],\\\"fields\\\":[{\\\"name\\\":\\\"versionsManager\\\",\\\"returnType\\\":\\\"VersionsManager\\\",\\\"modifier\\\":\\\"PRIVATE\\\"}],\\\"arcs\\\":[{\\\"source\\\":\\\"DisableVersionsManagementCommand\\\",\\\"target\\\":\\\"VersionsManager\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"DisableVersionsManagementCommand\\\",\\\"target\\\":\\\"VersionsManager\\\",\\\"arcType\\\":\\\"ASSOCIATION\\\"},{\\\"source\\\":\\\"DisableVersionsManagementCommand\\\",\\\"target\\\":\\\"Command\\\",\\\"arcType\\\":\\\"IMPLEMENTATION\\\"}]}\",\"{\\\"name\\\":\\\"LoadCommand\\\",\\\"path\\\":\\\""
                    + relativePath + "\\\\\\\\controller\\\\\\\\commands\\\\\\\\LoadCommand.java\\\",\\\"vertexType\\\":\\\"CLASS\\\",\\\"methods\\\":[{\\\"name\\\":\\\"execute\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"LoadCommand\\\",\\\"returnType\\\":\\\"Constructor\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"versionsManager\\\\\\\":\\\\\\\"VersionsManager\\\\\\\"}\\\"},{\\\"name\\\":\\\"getVersionsManager\\\",\\\"returnType\\\":\\\"VersionsManager\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"setVersionsManager\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"versionsManager\\\\\\\":\\\\\\\"VersionsManager\\\\\\\"}\\\"}],\\\"fields\\\":[{\\\"name\\\":\\\"versionsManager\\\",\\\"returnType\\\":\\\"VersionsManager\\\",\\\"modifier\\\":\\\"PRIVATE\\\"}],\\\"arcs\\\":[{\\\"source\\\":\\\"LoadCommand\\\",\\\"target\\\":\\\"VersionsManager\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"LoadCommand\\\",\\\"target\\\":\\\"VersionsManager\\\",\\\"arcType\\\":\\\"ASSOCIATION\\\"},{\\\"source\\\":\\\"LoadCommand\\\",\\\"target\\\":\\\"Command\\\",\\\"arcType\\\":\\\"IMPLEMENTATION\\\"}]}\",\"{\\\"name\\\":\\\"CommandFactory\\\",\\\"path\\\":\\\""
                    + relativePath + "\\\\\\\\controller\\\\\\\\commands\\\\\\\\CommandFactory.java\\\",\\\"vertexType\\\":\\\"CLASS\\\",\\\"methods\\\":[{\\\"name\\\":\\\"CommandFactory\\\",\\\"returnType\\\":\\\"Constructor\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"versionsManager\\\\\\\":\\\\\\\"VersionsManager\\\\\\\"}\\\"},{\\\"name\\\":\\\"createCommand\\\",\\\"returnType\\\":\\\"Command\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"type\\\\\\\":\\\\\\\"String\\\\\\\"}\\\"}],\\\"fields\\\":[{\\\"name\\\":\\\"documentManager\\\",\\\"returnType\\\":\\\"DocumentManager\\\",\\\"modifier\\\":\\\"PRIVATE\\\"},{\\\"name\\\":\\\"versionsManager\\\",\\\"returnType\\\":\\\"VersionsManager\\\",\\\"modifier\\\":\\\"PRIVATE\\\"}],\\\"arcs\\\":[{\\\"source\\\":\\\"CommandFactory\\\",\\\"target\\\":\\\"VersionsManager\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"CommandFactory\\\",\\\"target\\\":\\\"VersionsManager\\\",\\\"arcType\\\":\\\"ASSOCIATION\\\"},{\\\"source\\\":\\\"CommandFactory\\\",\\\"target\\\":\\\"DocumentManager\\\",\\\"arcType\\\":\\\"ASSOCIATION\\\"},{\\\"source\\\":\\\"CommandFactory\\\",\\\"target\\\":\\\"CreateCommand\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"CommandFactory\\\",\\\"target\\\":\\\"AddLatexCommand\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"CommandFactory\\\",\\\"target\\\":\\\"SaveCommand\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"CommandFactory\\\",\\\"target\\\":\\\"ChangeVersionsStrategyCommand\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"CommandFactory\\\",\\\"target\\\":\\\"Command\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"CommandFactory\\\",\\\"target\\\":\\\"DisableVersionsManagementCommand\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"CommandFactory\\\",\\\"target\\\":\\\"LoadCommand\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"CommandFactory\\\",\\\"target\\\":\\\"EnableVersionsManagementCommand\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"CommandFactory\\\",\\\"target\\\":\\\"EditCommand\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"CommandFactory\\\",\\\"target\\\":\\\"RollbackToPreviousVersionCommand\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"}]}\",\"{\\\"name\\\":\\\"EnableVersionsManagementCommand\\\",\\\"path\\\":\\\""
                    + relativePath + "\\\\\\\\controller\\\\\\\\commands\\\\\\\\EnableVersionsManagementCommand.java\\\",\\\"vertexType\\\":\\\"CLASS\\\",\\\"methods\\\":[{\\\"name\\\":\\\"EnableVersionsManagementCommand\\\",\\\"returnType\\\":\\\"Constructor\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"versionsManager\\\\\\\":\\\\\\\"VersionsManager\\\\\\\"}\\\"},{\\\"name\\\":\\\"execute\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"}],\\\"fields\\\":[{\\\"name\\\":\\\"versionsManager\\\",\\\"returnType\\\":\\\"VersionsManager\\\",\\\"modifier\\\":\\\"PRIVATE\\\"}],\\\"arcs\\\":[{\\\"source\\\":\\\"EnableVersionsManagementCommand\\\",\\\"target\\\":\\\"VersionsManager\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"EnableVersionsManagementCommand\\\",\\\"target\\\":\\\"VersionsManager\\\",\\\"arcType\\\":\\\"ASSOCIATION\\\"},{\\\"source\\\":\\\"EnableVersionsManagementCommand\\\",\\\"target\\\":\\\"Command\\\",\\\"arcType\\\":\\\"IMPLEMENTATION\\\"}]}\",\"{\\\"name\\\":\\\"EditCommand\\\",\\\"path\\\":\\\""
                    + relativePath + "\\\\\\\\controller\\\\\\\\commands\\\\\\\\EditCommand.java\\\",\\\"vertexType\\\":\\\"CLASS\\\",\\\"methods\\\":[{\\\"name\\\":\\\"execute\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"EditCommand\\\",\\\"returnType\\\":\\\"Constructor\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"versionsManager\\\\\\\":\\\\\\\"VersionsManager\\\\\\\"}\\\"}],\\\"fields\\\":[{\\\"name\\\":\\\"versionsManager\\\",\\\"returnType\\\":\\\"VersionsManager\\\",\\\"modifier\\\":\\\"PRIVATE\\\"}],\\\"arcs\\\":[{\\\"source\\\":\\\"EditCommand\\\",\\\"target\\\":\\\"VersionsManager\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"EditCommand\\\",\\\"target\\\":\\\"VersionsManager\\\",\\\"arcType\\\":\\\"ASSOCIATION\\\"},{\\\"source\\\":\\\"EditCommand\\\",\\\"target\\\":\\\"Command\\\",\\\"arcType\\\":\\\"IMPLEMENTATION\\\"}]}\",\"{\\\"name\\\":\\\"RollbackToPreviousVersionCommand\\\",\\\"path\\\":\\\""
                    + relativePath + "\\\\\\\\controller\\\\\\\\commands\\\\\\\\RollbackToPreviousVersionCommand.java\\\",\\\"vertexType\\\":\\\"CLASS\\\",\\\"methods\\\":[{\\\"name\\\":\\\"RollbackToPreviousVersionCommand\\\",\\\"returnType\\\":\\\"Constructor\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"versionsManager\\\\\\\":\\\\\\\"VersionsManager\\\\\\\"}\\\"},{\\\"name\\\":\\\"execute\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"}],\\\"fields\\\":[{\\\"name\\\":\\\"versionsManager\\\",\\\"returnType\\\":\\\"VersionsManager\\\",\\\"modifier\\\":\\\"PRIVATE\\\"}],\\\"arcs\\\":[{\\\"source\\\":\\\"RollbackToPreviousVersionCommand\\\",\\\"target\\\":\\\"VersionsManager\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"RollbackToPreviousVersionCommand\\\",\\\"target\\\":\\\"VersionsManager\\\",\\\"arcType\\\":\\\"ASSOCIATION\\\"},{\\\"source\\\":\\\"RollbackToPreviousVersionCommand\\\",\\\"target\\\":\\\"Command\\\",\\\"arcType\\\":\\\"IMPLEMENTATION\\\"}]}\"],\"parent\":{\"name\":\"src.controller\",\"path\":\""
                    + relativePath + "\\\\\\\\controller\",\"vertexType\":\"PACKAGE_PRIVATE\"},\"neighbours\":[],\"arcs\":[{\"source\":\"src.controller.commands\",\"target\":\"src.model\",\"arcType\":\"DEPENDENCY\"}]},{\"name\":\"src.model\",\"path\":\""
                    + relativePath + "\\\\model\",\"vertexType\":\"PACKAGE\",\"sinkVertices\":[\"{\\\"name\\\":\\\"VersionsManager\\\",\\\"path\\\":\\\""
                    + relativePath + "\\\\\\\\model\\\\\\\\VersionsManager.java\\\",\\\"vertexType\\\":\\\"CLASS\\\",\\\"methods\\\":[{\\\"name\\\":\\\"setStrategy\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"strategy\\\\\\\":\\\\\\\"VersionsStrategy\\\\\\\"}\\\"},{\\\"name\\\":\\\"setCurrentVersion\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"document\\\\\\\":\\\\\\\"Document\\\\\\\"}\\\"},{\\\"name\\\":\\\"changeStrategy\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"getType\\\",\\\"returnType\\\":\\\"String\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"rollback\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"isEnabled\\\",\\\"returnType\\\":\\\"boolean\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"setPreviousVersion\\\",\\\"returnType\\\":\\\"Document\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"getStrategy\\\",\\\"returnType\\\":\\\"VersionsStrategy\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"saveContents\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"enable\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"loadFromFile\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"VersionsManager\\\",\\\"returnType\\\":\\\"Constructor\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"latexEditorView\\\\\\\":\\\\\\\"LatexEditorView\\\\\\\",\\\\\\\"versionsStrategy\\\\\\\":\\\\\\\"VersionsStrategy\\\\\\\"}\\\"},{\\\"name\\\":\\\"enableStrategy\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"disable\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"putVersion\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"document\\\\\\\":\\\\\\\"Document\\\\\\\"}\\\"},{\\\"name\\\":\\\"rollbackToPreviousVersion\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"saveToFile\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"}],\\\"fields\\\":[{\\\"name\\\":\\\"enabled\\\",\\\"returnType\\\":\\\"boolean\\\",\\\"modifier\\\":\\\"PRIVATE\\\"},{\\\"name\\\":\\\"strategy\\\",\\\"returnType\\\":\\\"VersionsStrategy\\\",\\\"modifier\\\":\\\"PRIVATE\\\"},{\\\"name\\\":\\\"latexEditorView\\\",\\\"returnType\\\":\\\"LatexEditorView\\\",\\\"modifier\\\":\\\"PRIVATE\\\"}],\\\"arcs\\\":[{\\\"source\\\":\\\"VersionsManager\\\",\\\"target\\\":\\\"Document\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"VersionsManager\\\",\\\"target\\\":\\\"LatexEditorView\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"VersionsManager\\\",\\\"target\\\":\\\"LatexEditorView\\\",\\\"arcType\\\":\\\"ASSOCIATION\\\"},{\\\"source\\\":\\\"VersionsManager\\\",\\\"target\\\":\\\"VersionsStrategy\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"VersionsManager\\\",\\\"target\\\":\\\"VersionsStrategy\\\",\\\"arcType\\\":\\\"ASSOCIATION\\\"}]}\",\"{\\\"name\\\":\\\"DocumentManager\\\",\\\"path\\\":\\\""
                    + relativePath + "\\\\\\\\model\\\\\\\\DocumentManager.java\\\",\\\"vertexType\\\":\\\"CLASS\\\",\\\"methods\\\":[{\\\"name\\\":\\\"createDocument\\\",\\\"returnType\\\":\\\"Document\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"type\\\\\\\":\\\\\\\"String\\\\\\\"}\\\"},{\\\"name\\\":\\\"DocumentManager\\\",\\\"returnType\\\":\\\"Constructor\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"getContents\\\",\\\"returnType\\\":\\\"String\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"type\\\\\\\":\\\\\\\"String\\\\\\\"}\\\"}],\\\"fields\\\":[{\\\"name\\\":\\\"templates\\\",\\\"returnType\\\":\\\"HashMap[String,Document]\\\",\\\"modifier\\\":\\\"PRIVATE\\\"}],\\\"arcs\\\":[{\\\"source\\\":\\\"DocumentManager\\\",\\\"target\\\":\\\"Document\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"DocumentManager\\\",\\\"target\\\":\\\"Document\\\",\\\"arcType\\\":\\\"AGGREGATION\\\"}]}\",\"{\\\"name\\\":\\\"Document\\\",\\\"path\\\":\\\""
                    + relativePath + "\\\\\\\\model\\\\\\\\Document.java\\\",\\\"vertexType\\\":\\\"CLASS\\\",\\\"methods\\\":[{\\\"name\\\":\\\"clone\\\",\\\"returnType\\\":\\\"Document\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"changeVersion\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"save\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"filename\\\\\\\":\\\\\\\"String\\\\\\\"}\\\"},{\\\"name\\\":\\\"setContents\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"contents\\\\\\\":\\\\\\\"String\\\\\\\"}\\\"},{\\\"name\\\":\\\"getContents\\\",\\\"returnType\\\":\\\"String\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"getVersionID\\\",\\\"returnType\\\":\\\"String\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"Document\\\",\\\"returnType\\\":\\\"Constructor\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"date\\\\\\\":\\\\\\\"String\\\\\\\",\\\\\\\"copyright\\\\\\\":\\\\\\\"String\\\\\\\",\\\\\\\"versionID\\\\\\\":\\\\\\\"String\\\\\\\",\\\\\\\"contents\\\\\\\":\\\\\\\"String\\\\\\\",\\\\\\\"author\\\\\\\":\\\\\\\"String\\\\\\\"}\\\"},{\\\"name\\\":\\\"Document\\\",\\\"returnType\\\":\\\"Constructor\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"}],\\\"fields\\\":[{\\\"name\\\":\\\"author\\\",\\\"returnType\\\":\\\"String\\\",\\\"modifier\\\":\\\"PRIVATE\\\"},{\\\"name\\\":\\\"date\\\",\\\"returnType\\\":\\\"String\\\",\\\"modifier\\\":\\\"PRIVATE\\\"},{\\\"name\\\":\\\"copyright\\\",\\\"returnType\\\":\\\"String\\\",\\\"modifier\\\":\\\"PRIVATE\\\"},{\\\"name\\\":\\\"versionID\\\",\\\"returnType\\\":\\\"String\\\",\\\"modifier\\\":\\\"PRIVATE\\\"},{\\\"name\\\":\\\"contents\\\",\\\"returnType\\\":\\\"String\\\",\\\"modifier\\\":\\\"PRIVATE\\\"}],\\\"arcs\\\":[]}\"],\"parent\":{\"name\":\"src\",\"path\":\""
                    + relativePath + "\",\"vertexType\":\"PACKAGE_PRIVATE\"},\"neighbours\":[{\"name\":\"src.model.strategies\",\"path\":\"\\\""
                    + relativePath + "\\\\\\\\model\\\\\\\\strategies\",\"vertexType\":\"PACKAGE\",\"parentName\":\"src.model\"}],\"arcs\":[{\"source\":\"src.model\",\"target\":\"src.view\",\"arcType\":\"DEPENDENCY\"},{\"source\":\"src.model\",\"target\":\"src.model.strategies\",\"arcType\":\"DEPENDENCY\"}]},{\"name\":\"src.model.strategies\",\"path\":\""
                    + relativePath + "\\\\model\\\\strategies\",\"vertexType\":\"PACKAGE\",\"sinkVertices\":[\"{\\\"name\\\":\\\"VersionsStrategy\\\",\\\"path\\\":\\\""
                    + relativePath + "\\\\\\\\model\\\\\\\\strategies\\\\\\\\VersionsStrategy.java\\\",\\\"vertexType\\\":\\\"INTERFACE\\\",\\\"methods\\\":[{\\\"name\\\":\\\"removeVersion\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"setEntireHistory\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"documents\\\\\\\":\\\\\\\"List[Document]\\\\\\\"}\\\"},{\\\"name\\\":\\\"putVersion\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"document\\\\\\\":\\\\\\\"Document\\\\\\\"}\\\"},{\\\"name\\\":\\\"getEntireHistory\\\",\\\"returnType\\\":\\\"List[Document]\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"getVersion\\\",\\\"returnType\\\":\\\"Document\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"}],\\\"fields\\\":[],\\\"arcs\\\":[{\\\"source\\\":\\\"VersionsStrategy\\\",\\\"target\\\":\\\"Document\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"}]}\",\"{\\\"name\\\":\\\"VolatileVersionsStrategy\\\",\\\"path\\\":\\\""
                    + relativePath + "\\\\\\\\model\\\\\\\\strategies\\\\\\\\VolatileVersionsStrategy.java\\\",\\\"vertexType\\\":\\\"CLASS\\\",\\\"methods\\\":[{\\\"name\\\":\\\"VolatileVersionsStrategy\\\",\\\"returnType\\\":\\\"Constructor\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"setEntireHistory\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"documents\\\\\\\":\\\\\\\"List[Document]\\\\\\\"}\\\"},{\\\"name\\\":\\\"removeVersion\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"putVersion\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"document\\\\\\\":\\\\\\\"Document\\\\\\\"}\\\"},{\\\"name\\\":\\\"getEntireHistory\\\",\\\"returnType\\\":\\\"List[Document]\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"getVersion\\\",\\\"returnType\\\":\\\"Document\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"}],\\\"fields\\\":[{\\\"name\\\":\\\"history\\\",\\\"returnType\\\":\\\"ArrayList[Document]\\\",\\\"modifier\\\":\\\"PRIVATE\\\"}],\\\"arcs\\\":[{\\\"source\\\":\\\"VolatileVersionsStrategy\\\",\\\"target\\\":\\\"Document\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"VolatileVersionsStrategy\\\",\\\"target\\\":\\\"Document\\\",\\\"arcType\\\":\\\"AGGREGATION\\\"},{\\\"source\\\":\\\"VolatileVersionsStrategy\\\",\\\"target\\\":\\\"VersionsStrategy\\\",\\\"arcType\\\":\\\"IMPLEMENTATION\\\"}]}\",\"{\\\"name\\\":\\\"VersionsStrategyFactory\\\",\\\"path\\\":\\\""
                    + relativePath + "\\\\\\\\model\\\\\\\\strategies\\\\\\\\VersionsStrategyFactory.java\\\",\\\"vertexType\\\":\\\"CLASS\\\",\\\"methods\\\":[{\\\"name\\\":\\\"VersionsStrategyFactory\\\",\\\"returnType\\\":\\\"Constructor\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"createStrategy\\\",\\\"returnType\\\":\\\"VersionsStrategy\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"type\\\\\\\":\\\\\\\"String\\\\\\\"}\\\"}],\\\"fields\\\":[{\\\"name\\\":\\\"strategies\\\",\\\"returnType\\\":\\\"HashMap[String,VersionsStrategy]\\\",\\\"modifier\\\":\\\"PRIVATE\\\"}],\\\"arcs\\\":[{\\\"source\\\":\\\"VersionsStrategyFactory\\\",\\\"target\\\":\\\"VersionsStrategy\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"VersionsStrategyFactory\\\",\\\"target\\\":\\\"VersionsStrategy\\\",\\\"arcType\\\":\\\"AGGREGATION\\\"},{\\\"source\\\":\\\"VersionsStrategyFactory\\\",\\\"target\\\":\\\"VolatileVersionsStrategy\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"VersionsStrategyFactory\\\",\\\"target\\\":\\\"StableVersionsStrategy\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"}]}\",\"{\\\"name\\\":\\\"StableVersionsStrategy\\\",\\\"path\\\":\\\""
                    + relativePath + "\\\\\\\\model\\\\\\\\strategies\\\\\\\\StableVersionsStrategy.java\\\",\\\"vertexType\\\":\\\"CLASS\\\",\\\"methods\\\":[{\\\"name\\\":\\\"removeVersion\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"setEntireHistory\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"documents\\\\\\\":\\\\\\\"List[Document]\\\\\\\"}\\\"},{\\\"name\\\":\\\"putVersion\\\",\\\"returnType\\\":\\\"void\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{\\\\\\\"document\\\\\\\":\\\\\\\"Document\\\\\\\"}\\\"},{\\\"name\\\":\\\"getEntireHistory\\\",\\\"returnType\\\":\\\"List[Document]\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"},{\\\"name\\\":\\\"getVersion\\\",\\\"returnType\\\":\\\"Document\\\",\\\"modifier\\\":\\\"PUBLIC\\\",\\\"parameters\\\":\\\"{}\\\"}],\\\"fields\\\":[{\\\"name\\\":\\\"versionID\\\",\\\"returnType\\\":\\\"String\\\",\\\"modifier\\\":\\\"PRIVATE\\\"}],\\\"arcs\\\":[{\\\"source\\\":\\\"StableVersionsStrategy\\\",\\\"target\\\":\\\"Document\\\",\\\"arcType\\\":\\\"DEPENDENCY\\\"},{\\\"source\\\":\\\"StableVersionsStrategy\\\",\\\"target\\\":\\\"VersionsStrategy\\\",\\\"arcType\\\":\\\"IMPLEMENTATION\\\"}]}\"],\"parent\":{\"name\":\"src.model\",\"path\":\""
                    + relativePath + "\\\\\\\\model\",\"vertexType\":\"PACKAGE_PRIVATE\"},\"neighbours\":[],\"arcs\":[{\"source\":\"src.model.strategies\",\"target\":\"src.model\",\"arcType\":\"DEPENDENCY\"}]}]";
            JsonArray expectedJsonArray = JsonParser.parseString(expectedJsonString).getAsJsonArray();
            JsonArray actualJsonArray = JsonParser.parseString(Files.readAllLines(actualFile.toPath()).get(0)).getAsJsonArray();
            assertEquals(expectedJsonArray.size(), actualJsonArray.size());
            for (JsonElement element: expectedJsonArray) {
                for (JsonElement actualElement: actualJsonArray) {
                    if (!actualElement.getAsJsonObject().get("name").equals(element.getAsJsonObject().get("name"))) {
                        continue;
                    }
                    assertEquals(element.getAsJsonObject().size(), actualElement.getAsJsonObject().size());

                    JsonArray expectedArcs = JsonParser.parseString(element.getAsJsonObject().get("arcs").toString()).getAsJsonArray();
                    JsonArray actualArcs = JsonParser.parseString(actualElement.getAsJsonObject().get("arcs").toString()).getAsJsonArray();
                    Set<JsonElement> expectedJsonElementSet = CompareArray.setOfElements(expectedArcs);
                    Set<JsonElement> actualJsonElementSet = CompareArray.setOfElements(actualArcs);
                    assertEquals(expectedJsonElementSet, actualJsonElementSet);

                    JsonArray expJson = JsonParser.parseString(element.getAsJsonObject().get("sinkVertices").toString()).getAsJsonArray();
                    JsonArray actJson = JsonParser.parseString(actualElement.getAsJsonObject().get("sinkVertices").toString()).getAsJsonArray();
                    List<SinkVertex> expSinkVertices = new ArrayList<>();
                    List<SinkVertex> actSinkVertices = new ArrayList<>();
                    for (JsonElement jsonElement: expJson) {
                        Gson gson = new GsonBuilder().registerTypeAdapter(SinkVertex.class, new SinkVertexDeserializer()).create();
                        expSinkVertices.add(gson.fromJson(jsonElement.getAsString(), SinkVertex.class));
                    }
                    for (JsonElement jsonElement: actJson) {
                        Gson gson = new GsonBuilder().registerTypeAdapter(SinkVertex.class, new SinkVertexDeserializer()).create();
                        actSinkVertices.add(gson.fromJson(jsonElement.getAsString(), SinkVertex.class));
                    }
                    for (SinkVertex sinkVertex: expSinkVertices) {
                        Optional<SinkVertex> optionalSinkVertex = actSinkVertices.stream().filter(sinkVertex1 ->
                            sinkVertex1.getName().equals(sinkVertex.getName()) &&
                            sinkVertex1.getVertexType().equals(sinkVertex.getVertexType()) &&
                            sinkVertex1.getArcs().size() == sinkVertex.getArcs().size() &&
                            sinkVertex1.getMethods().size() == sinkVertex.getMethods().size() &&
                            sinkVertex1.getFields().size() == sinkVertex.getFields().size())
                        .findFirst();
                        assertTrue(optionalSinkVertex.isPresent());

                        List<SinkVertex.Field> fields = optionalSinkVertex.get().getFields();
                        for (SinkVertex.Field field: sinkVertex.getFields()) {
                            fields.stream().filter(field1 ->
                                field1.getName().equals(field.getName()) &&
                                field1.getType().equals(field.getType()) &&
                                field1.getModifier().equals(field.getModifier()))
                            .findFirst().orElseGet(Assertions::fail);
                        }

                        List<SinkVertex.Method> methods = optionalSinkVertex.get().getMethods();
                        for (SinkVertex.Method method: sinkVertex.getMethods()) {
                            methods.stream().filter(method1 ->
                                method1.getName().equals(method.getName()) &&
                                method1.getReturnType().equals(method.getReturnType()) &&
                                method1.getParameters().equals(method.getParameters()))
                            .findFirst().orElseGet(Assertions::fail);
                        }

                        List<Arc<SinkVertex>> arcs = optionalSinkVertex.get().getArcs();
                        for (Arc<SinkVertex> arc: sinkVertex.getArcs()) {
                            arcs.stream().filter(sinkVertexArc ->
                                sinkVertexArc.getSourceVertex().getName().equals(arc.getSourceVertex().getName()) &&
                                sinkVertexArc.getTargetVertex().getName().equals(arc.getTargetVertex().getName()) &&
                                sinkVertexArc.getArcType().equals(arc.getArcType()))
                            .findFirst().orElseGet(Assertions::fail);
                        }
                    }

                    JsonArray expectedNeighbours = JsonParser.parseString(element.getAsJsonObject().get("neighbours").toString()).getAsJsonArray();
                    JsonArray actualNeighbours = JsonParser.parseString(actualElement.getAsJsonObject().get("neighbours").toString()).getAsJsonArray();
                    expectedJsonElementSet = CompareArray.setOfElements(expectedNeighbours);
                    actualJsonElementSet = CompareArray.setOfElements2(actualNeighbours);
                    assertEquals(expectedJsonElementSet, actualJsonElementSet);

                    JsonObject expectedParent = JsonParser.parseString(element.getAsJsonObject().get("parent").toString()).getAsJsonObject();
                    JsonObject actualParent = JsonParser.parseString(actualElement.getAsJsonObject().get("parent").toString()).getAsJsonObject();
                    assertEquals(expectedParent.get("name"), actualParent.get("name"));
                    assertEquals(expectedParent.get("vertexType"), actualParent.get("vertexType"));
                    assertEquals(expectedParent.get("path").toString(), actualParent.get("path").toString().replaceAll("\\\\", "\\\\\\\\"));
                }
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public static class CompareArray {
        public static Set<JsonElement> setOfElements(JsonArray arr) {
            Set<JsonElement> set = new HashSet<>();
            for (JsonElement j : arr) {
                set.add(j);
            }
            return set;
        }

        public static Set<JsonElement> setOfElements2(JsonArray arr) {
            Set<JsonElement> set = new HashSet<>();
            for (JsonElement j : arr) {
                String path = j.getAsJsonObject().get("path").toString();
                if (path.length() > 0) {
                    j.getAsJsonObject().addProperty("path", path.substring(0, path.length()-1));
                }
                set.add(j);
            }
            return set;
        }


    }
}
